<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Creating your first R Package</title>
	
	<meta name="description" content="A short guide on how to create your first R package">
	
	<meta name="author" content="michaelway@github.io">

	<!-- Enable responsive viewport -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- Le styles -->
	<link href="/assets/resources/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link href="/assets/resources/font-awesome/css/font-awesome.min.css" rel="stylesheet">
	<link href="/assets/resources/syntax/syntax.css" rel="stylesheet">
	<link href="/assets/css/style.css" rel="stylesheet">

	<!-- Le fav and touch icons -->
	<!-- Update these with your own images
	<link rel="shortcut icon" href="images/favicon.ico">
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
	-->

	<link rel="alternate" type="application/rss+xml" title="" href="/feed.xml">
</head>

<body>
	<nav class="navbar navbar-default visible-xs" role="navigation">
		<!-- Brand and toggle get grouped for better mobile display -->
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			
			<a type="button" class="navbar-toggle nav-link" href="http://github.com/michaelway">
				<i class="fa fa-github"></i>
			</a>
			
			
			
			<a class="navbar-brand" href="/">
				<img src="https://dl.dropboxusercontent.com/u/97084569/logo.jpeg" class="img-circle" />
				mu-omega
			</a>
		</div>

		<!-- Collect the nav links, forms, and other content for toggling -->
		<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			<ul class="nav navbar-nav">
				<li class="active"><a href="/">Home</a></li>
				<li><a href="/categories.html">Categories</a></li>
				<li><a href="/tags.html">Tags</a></li>
			</ul>
		</div><!-- /.navbar-collapse -->
	</nav>

	<!-- nav-menu-dropdown -->
	<div class="btn-group hidden-xs" id="nav-menu">
		<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
			<i class="fa fa-bars"></i>
		</button>
		<ul class="dropdown-menu" role="menu">
			<li><a href="/"><i class="fa fa-home"></i>Home</a></li>
			<li><a href="/categories.html"><i class="fa fa-folder"></i>Categories</a></li>
			<li><a href="/tags.html"><i class="fa fa-tags"></i>Tags</a></li>
			<li class="divider"></li>
			<li><a href="#"><i class="fa fa-arrow-up"></i>Top of Page</a></li>
		</ul>
	</div>

	<div class="col-sm-3 sidebar hidden-xs" style="background: url(https://dl.dropboxusercontent.com/u/97084569/logo.jpeg) no-repeat !important;">
		<!-- sidebar.html -->
<header class="sidebar-header" role="banner">
	<a href="/">
		<img src="http://www.gravatar.com/avatar/726351295ec82e145928582f595aa3aa?s=150" class="img-circle" />
	</a>
	<h3 class="title">
        <a href="/">mu-omega</a>
    </h3>
</header>


<div id="bio" class="text-center">
	About science, coding and other things...
</div>


<div id="contact-list" class="text-center">
	<ul class="list-unstyled list-inline">
		
		<li>
			<a class="btn btn-default btn-sm" href="https://github.com/michaelway">
				<i class="fa fa-github-alt fa-lg"></i>
			</a>
		</li>
		
		
		
	</ul>
	<ul id="contact-list-secondary" class="list-unstyled list-inline">
		
		
		<li>
			<a class="btn btn-default btn-sm" href="/feed.xml">
				<i class="fa fa-rss fa-lg"></i>
			</a>
		</li>
	</ul>
</div>
<!-- sidebar.html end -->

	</div>

	<div class="col-sm-9 col-sm-offset-3">
		<div class="page-header">
  <h1>Creating your first R Package </h1>
</div>
	
<article>

	<div class="col-sm-10">
	 <span class="post-date">
	   
	   September 
	   20th,
	   
	   2016
	 </span>
	  <div class="article_body">
	  <p>I was first drawn to R by its ability to produce beautiful graphics.  When I first started using it, creating the perfect plot often involved copying code and then tweaking away until it was just right… Then forgetting the code a few months later, scratching my head and starting all over again. Not only this but I began to use R for more complex tasks involving data analysis, I often found myself writing redundant functions over and over again for the same reasons.</p>

<p>Learning how to create my first package in R helped me overcome these problems as it allowed me to create a single place my code was stored it allowed me to install my code onto any machine in which I was running an analysis. Since I have learnt how to do this, it has saved me tonnes of time so I wanted to share some of the tips that I have for this process.</p>

<h2 id="the-basics">The Basics</h2>

<p>To get to grips with what a package is, have a play around with another package that you have already installed. I would suggest running everything through <a href="https://www.rstudio.com/" title="RStudio webiste">RStudio</a> software, as it makes coding in R so much simpler.</p>

<p>For example, load up the popular package ggplot2:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r">install.packages<span class="p">(</span><span class="s">&quot;ggplot2&quot;</span><span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>ggplot2<span class="p">)</span></code></pre></figure>

<p>This loads all the code necessary run ggplot2 functions into your R session, whilst giving access to all of the help documentation. Try typing ‘f1’ next to a ggplot2 function to get a help page giving information about how to use the function, its author and examples typically with some test data.  Useful right!  You can easily create something just like this with your own code.</p>

<p>Before creating your first package, it is important to understand the typical structure of an R-package 
A simple R package should minimally contain four file types:</p>
<ul>
  <li>*.R files (where you store your code)</li>
  <li>A NAMESPACE file (which contains all the information R needs to install the package)</li>
  <li>A DESCRIPTION file (which contains information about the package such as name, author, creation date etc…)</li>
  <li>*.rmd files (where any help documentation for your code is stored)</li>
</ul>

<p>The package directory containing these files should include subdirectories such as R/ and /man where .r and .rmd files are store, respectively.  Dont get put off by the complexity of this - there are tools that  make generating these files a piddle.</p>

<h2 id="creating-your-first-package">Creating your first package</h2>

<p>You can generate all of the file and documentation for your package by hand.  If you have better things to do, however, the devtools packages is a lifesaver.  This package will generate your NAMESPACE, DESCRIPTION and *.rmd files with very little effort.</p>

<p>To install devtools:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r">install.package<span class="p">(</span><span class="s">&quot;devtools&quot;</span><span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>devtools<span class="p">)</span></code></pre></figure>

<p>The devtools pacakge will create the directory structure of a package for you and create all of the files neccessary when builing a package.  Just run the create() function, in the directory where you want to build you package, giving it an appropriate name.</p>

<p>For example:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="kp">setwd</span><span class="p">(</span><span class="s">&quot;~/&quot;</span><span class="p">)</span>

create<span class="p">(</span>FirstPackage<span class="p">)</span></code></pre></figure>

<p>When running this function messages should pop up in your console and a directory with the name of your package should appear in your working directory containing the files and folders shown below:</p>

<p><img src="https://dl.dropboxusercontent.com/u/97084569/Blog1.png" alt="The console" /></p>

<p><img src="https://dl.dropboxusercontent.com/u/97084569/blog2.png" alt="The directory and file structure" /></p>

<h2 id="add-your-function">Add your function</h2>

<p>The most important bit of your package is your code, which must be wrapped into a function.  In my example, i’ve added a function that I created for printing random DNA sequences.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r">generateDNA <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>bp<span class="o">=</span><span class="m">20</span> <span class="p">)</span>
  <span class="p">{</span>
  <span class="c1">#Nucleotides to use in sequence</span>
  nucleotides <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;A&quot;</span><span class="p">,</span> <span class="s">&quot;C&quot;</span><span class="p">,</span> <span class="s">&quot;G&quot;</span><span class="p">,</span> <span class="s">&quot;T&quot;</span><span class="p">)</span>

  <span class="c1">#Create empty character list to add nucleotides to</span>
  sequence <span class="o">&lt;-</span> <span class="kp">as.character</span><span class="p">()</span>
  
  <span class="c1">#Print nucleotides to sequence randomly of length bp </span>
  <span class="kr">for</span><span class="p">(</span>nucleotide <span class="kr">in</span> <span class="m">1</span><span class="o">:</span>bp<span class="p">)</span>
    <span class="p">{</span>
    <span class="kp">sequence</span><span class="p">[</span>nucleotide<span class="p">]</span> <span class="o">&lt;-</span> <span class="kp">sample</span><span class="p">(</span>nucleotides<span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">4</span><span class="p">],</span>
                          size<span class="o">=</span><span class="m">1</span><span class="p">)</span>
    <span class="p">}</span>
  
  <span class="c1">#Collapse spaces from the sequence</span>
  finalSequence <span class="o">&lt;-</span> <span class="kp">paste</span><span class="p">(</span><span class="kp">sequence</span><span class="p">,</span> collapse<span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
  
  <span class="c1">#Return sequence </span>
  <span class="kr">return</span><span class="p">(</span>finalSequence<span class="p">)</span>
  <span class="p">}</span></code></pre></figure>

<p>Now save this function to a .R file in the /R subdirectory of your package.</p>

<h2 id="documentation">Documentation</h2>

<p>For devtools to package up your function, you need to add tags to your .R function file.  This involves adding the hash-apostrophe (#’) at the beginning of lines that you want devtools to recognise.  Further, tags are added using the @ symbol. There are a variety of predefined tags that you can use, and their use is .  <strong>The @export tag is essential, as it means that devtools will add your function to the NAMESPACE file; without this your function will not run when the package is run!</strong></p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1">#&#39; @title generateDNA()</span>
<span class="c1">#&#39; @description This function allows you to create random DNA sequence of variable length</span>
<span class="c1">#&#39; @param bp: numeric. Length of random DNA sequence that you wish to produce (Default = 20).</span>
<span class="c1">#&#39; @return finalSequence: string. Function returns a random DNA sequence of variable length.</span>
<span class="c1">#&#39; @export</span>

generateDNA <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>bp<span class="o">=</span><span class="m">20</span><span class="p">)</span>
  <span class="p">{</span>
  <span class="c1">#Nucleotides to use in sequence</span>
  nucleotides <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;A&quot;</span><span class="p">,</span> <span class="s">&quot;C&quot;</span><span class="p">,</span> <span class="s">&quot;G&quot;</span><span class="p">,</span> <span class="s">&quot;T&quot;</span><span class="p">)</span>

  <span class="c1">#Create empty character list to add nucleotides to</span>
  sequence <span class="o">&lt;-</span> <span class="kp">as.character</span><span class="p">()</span>
  
  <span class="c1">#Print nucleotides to sequence randomly of length bp </span>
  <span class="kr">for</span><span class="p">(</span>nucleotide <span class="kr">in</span> <span class="m">1</span><span class="o">:</span>bp<span class="p">)</span>
    <span class="p">{</span>
    <span class="kp">sequence</span><span class="p">[</span>nucleotide<span class="p">]</span> <span class="o">&lt;-</span> <span class="kp">sample</span><span class="p">(</span>nucleotides<span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">4</span><span class="p">],</span>
                          size<span class="o">=</span><span class="m">1</span><span class="p">)</span>
    <span class="p">}</span>
  
  <span class="c1">#Collapse spaces from the sequence</span>
  finalSequence <span class="o">&lt;-</span> <span class="kp">paste</span><span class="p">(</span><span class="kp">sequence</span><span class="p">,</span> collapse<span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
  
  <span class="c1">#Return sequence </span>
  <span class="kr">return</span><span class="p">(</span>finalSequence<span class="p">)</span>
  <span class="p">}</span> </code></pre></figure>

<p>Finally, to generate all of the documention for your package just go into the package directory and run the document() function from devtools.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="kp">setwd</span><span class="p">(</span><span class="s">&quot;~/FirstPackage&quot;</span><span class="p">)</span>
document<span class="p">()</span></code></pre></figure>

<p>This will create a /man directory containing the .Rd files that contain the documentation for your package.</p>

<h2 id="install-and-run">Install and run</h2>

<p>We’ve now created a fully functional R package, the final thing to do is install and run it.</p>

<p>Just run the install() function from the oh so useful devtools package:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1">#Go to the directory above your package</span>
<span class="kp">setwd</span><span class="p">(</span><span class="s">&quot;../&quot;</span><span class="p">)</span>

<span class="c1">#Install package</span>
install<span class="p">(</span>FirstPackage<span class="p">)</span>

<span class="c1">#Load package</span>
<span class="kn">library</span><span class="p">(</span>FirstPackage<span class="p">)</span>

<span class="c1">#Run function</span>

generateDNA<span class="p">(</span>bp<span class="o">=</span><span class="m">100</span><span class="p">)</span></code></pre></figure>

<p>Look at that pointless function go, and thats a quick way to create an R package!</p>

	  </div>

		
		<ul class="tag_box list-unstyled list-inline">
		  <li><i class="fa fa-folder-open"></i></li>
		  
		  
			 
				<li><a href="/categories.html#R-ref">
					R <span>(1)</span>
					
				</a></li>
			
		  
		</ul>
		  

		
		<ul class="list-inline">
		  <li><i class="fa fa-tags"></i></li>
		  
		  
			 
				<li>
					<a href="/tags.html#R-ref">
					R <span>(1)</span>
					,
					</a>
				</li>
			 
				<li>
					<a href="/tags.html#RStudio-ref">
					RStudio <span>(1)</span>
					,
					</a>
				</li>
			 
				<li>
					<a href="/tags.html#devtoold-ref">
					devtoold <span>(1)</span>
					
					</a>
				</li>
			
		  
		  
		</ul>
		  

		<hr>

		<div>
      <section class="share col-sm-6">
        <h4 class="section-title">Share Post</h4>
        <a class="btn btn-default btn-sm twitter" href="http://twitter.com/share?text=Creating your first R Package"
           onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
          <i class="fa fa-twitter fa-lg"></i>
          Twitter
        </a>
        <a class="btn btn-default btn-sm facebook" href="https://www.facebook.com/sharer/sharer.php"
           onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
          <i class="fa fa-facebook fa-lg"></i>
          Facebook
        </a>
        <a class="btn btn-default btn-sm gplus"
           onclick="window.open('https://plus.google.com/share?url='+window.location.href, 'google-plus-share', 'width=490,height=530');return false;">
          <i class="fa fa-google-plus fa-lg"></i>
          Google+
        </a>
      </section>

      <section class="col-sm-6 author">
        <img src="http://www.gravatar.com/avatar/726351295ec82e145928582f595aa3aa" class="img-rounded author-image" />
        <h4 class="section-title author-name">michaelway@github.io</h4>
        <p class="author-bio">About science, coding and other things...</p>
      </section>
    </div>

    <div class="clearfix"></div>

		<ul class="pager">
		  
		  <li class="previous disabled"><a>&larr; Previous</a></li>
		  
		  
			<li class="next disabled"><a>Next &rarr;</a>
		  
		</ul>

		<hr>
	</div>
	
	<div class="col-sm-2 sidebar-2">
	
	</div>
</article>
<div class="clearfix"></div>





		<footer>
			<hr/>
			<p>
				&copy; 2016 michaelway@github.io with <a href="http://jekyllrb.com/">Jekyll</a>. Theme: <a href="https://github.com/dbtek/dbyll">dbyll</a> by dbtek.
			</p>
		</footer>
	</div>

	<script type="text/javascript" src="/assets/resources/jquery/jquery.min.js"></script>
	<script type="text/javascript" src="/assets/resources/bootstrap/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="/assets/js/app.js"></script>
</body>
</html>



<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'mu-omega', 'auto');
  ga('send', 'pageview');
</script>

